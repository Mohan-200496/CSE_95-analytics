<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Reports - Punjab Rozgar Portal</title>
    
    <!-- Punjab Rozgar Authentication -->
    <script src="../../js/auth.js"></script>
    <!-- Punjab Rozgar Analytics -->
    <script src="../../js/punjab-analytics.js"></script>
    
    <!-- Chart.js for analytics visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-header {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            text-align: center;
        }

        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .page-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .breadcrumb {
            margin-bottom: 2rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .report-filters {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            font-weight: 500;
            color: #333;
        }

        .filter-input,
        .filter-select {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .btn {
            background: #667eea;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #5a67d8;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-success:hover {
            background: #218838;
        }

        .reports-grid {
            display: grid;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .report-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .report-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e1e5e9;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .report-header h3 {
            font-size: 1.3rem;
            color: #333;
        }

        .report-content {
            padding: 1.5rem;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 1rem;
        }

        .chart-container.small {
            height: 300px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .metric-item {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .metric-number {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: #333;
        }

        .metric-label {
            color: #666;
            font-size: 0.9rem;
        }

        .metric-change {
            font-size: 0.8rem;
            margin-top: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }

        .change-positive {
            color: #28a745;
        }

        .change-negative {
            color: #dc3545;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .data-table th,
        .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e1e5e9;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .export-actions {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .export-actions h3 {
            margin-bottom: 1rem;
        }

        .export-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .insight-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .insight-card h4 {
            margin-bottom: 0.5rem;
        }

        .insight-card p {
            opacity: 0.9;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .export-buttons {
                flex-direction: column;
                align-items: center;
            }

            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a href="../../index.html">Home</a> / 
            <a href="../admin/dashboard.html">Admin</a> / 
            Analytics Reports
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <h1>Analytics Reports</h1>
            <p>Comprehensive insights and data analytics for Punjab Rozgar Portal</p>
        </div>

        <!-- Report Filters -->
        <div class="report-filters">
            <div class="filters-grid">
                <div class="filter-group">
                    <label class="filter-label">Date Range</label>
                    <select class="filter-select" id="dateRange">
                        <option value="7d">Last 7 Days</option>
                        <option value="30d" selected>Last 30 Days</option>
                        <option value="90d">Last 90 Days</option>
                        <option value="1y">Last Year</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Report Type</label>
                    <select class="filter-select" id="reportType">
                        <option value="overview" selected>Overview</option>
                        <option value="users">User Analytics</option>
                        <option value="jobs">Job Analytics</option>
                        <option value="engagement">Engagement</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">User Type</label>
                    <select class="filter-select" id="userType">
                        <option value="all" selected>All Users</option>
                        <option value="job_seekers">Job Seekers</option>
                        <option value="employers">Employers</option>
                        <option value="admins">Admins</option>
                    </select>
                </div>
                <div class="filter-group">
                    <button class="btn" onclick="generateReport()">
                        <i class="fas fa-chart-line"></i> Generate Report
                    </button>
                </div>
            </div>
        </div>

        <!-- Key Insights -->
        <div class="insight-card">
            <h4><i class="fas fa-lightbulb"></i> Key Insights</h4>
            <p>User engagement is up 23% this month with job applications increasing by 18%. The most popular job categories are Technology (34%) and Healthcare (28%).</p>
        </div>

        <!-- Reports Grid -->
        <div class="reports-grid">
            <!-- Overview Metrics -->
            <div class="report-card">
                <div class="report-header">
                    <h3>Overview Metrics</h3>
                    <button class="btn btn-success" onclick="exportReport('overview')">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
                <div class="report-content">
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-number">14,567</div>
                            <div class="metric-label">Total Page Views</div>
                            <div class="metric-change change-positive">
                                <i class="fas fa-arrow-up"></i> +12.3%
                            </div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-number">2,847</div>
                            <div class="metric-label">Unique Visitors</div>
                            <div class="metric-change change-positive">
                                <i class="fas fa-arrow-up"></i> +8.7%
                            </div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-number">1,234</div>
                            <div class="metric-label">Job Applications</div>
                            <div class="metric-change change-positive">
                                <i class="fas fa-arrow-up"></i> +18.2%
                            </div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-number">567</div>
                            <div class="metric-label">New Registrations</div>
                            <div class="metric-change change-positive">
                                <i class="fas fa-arrow-up"></i> +25.1%
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Traffic Trends -->
            <div class="report-card">
                <div class="report-header">
                    <h3>Traffic Trends</h3>
                    <select id="trafficPeriod" onchange="updateTrafficChart()">
                        <option value="daily">Daily</option>
                        <option value="weekly" selected>Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>
                <div class="report-content">
                    <div class="chart-container">
                        <canvas id="trafficChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- User Engagement -->
            <div class="report-card">
                <div class="report-header">
                    <h3>User Engagement Analysis</h3>
                    <button class="btn btn-success" onclick="exportReport('engagement')">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
                <div class="report-content">
                    <div class="chart-container small">
                        <canvas id="engagementChart"></canvas>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Value</th>
                                <th>Change</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Average Session Duration</td>
                                <td>4m 32s</td>
                                <td class="change-positive">+8%</td>
                            </tr>
                            <tr>
                                <td>Pages per Session</td>
                                <td>3.2</td>
                                <td class="change-positive">+12%</td>
                            </tr>
                            <tr>
                                <td>Bounce Rate</td>
                                <td>34.5%</td>
                                <td class="change-negative">-5%</td>
                            </tr>
                            <tr>
                                <td>Return Visitor Rate</td>
                                <td>67.8%</td>
                                <td class="change-positive">+15%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Job Analytics -->
            <div class="report-card">
                <div class="report-header">
                    <h3>Job Performance Analytics</h3>
                    <button class="btn btn-success" onclick="exportReport('jobs')">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
                <div class="report-content">
                    <div class="chart-container small">
                        <canvas id="jobChart"></canvas>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Job Category</th>
                                <th>Postings</th>
                                <th>Applications</th>
                                <th>View Rate</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Technology</td>
                                <td>287</td>
                                <td>1,456</td>
                                <td>89.2%</td>
                            </tr>
                            <tr>
                                <td>Healthcare</td>
                                <td>198</td>
                                <td>987</td>
                                <td>76.5%</td>
                            </tr>
                            <tr>
                                <td>Education</td>
                                <td>156</td>
                                <td>678</td>
                                <td>82.1%</td>
                            </tr>
                            <tr>
                                <td>Manufacturing</td>
                                <td>134</td>
                                <td>445</td>
                                <td>71.3%</td>
                            </tr>
                            <tr>
                                <td>Government</td>
                                <td>89</td>
                                <td>567</td>
                                <td>94.7%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Top Pages -->
            <div class="report-card">
                <div class="report-header">
                    <h3>Top Performing Pages</h3>
                    <button class="btn btn-success" onclick="exportReport('pages')">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
                <div class="report-content">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Page</th>
                                <th>Views</th>
                                <th>Unique Views</th>
                                <th>Avg. Time</th>
                                <th>Bounce Rate</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>/</td>
                                <td>5,234</td>
                                <td>3,892</td>
                                <td>2m 45s</td>
                                <td>45.2%</td>
                            </tr>
                            <tr>
                                <td>/pages/jobs/browse.html</td>
                                <td>3,567</td>
                                <td>2,891</td>
                                <td>4m 12s</td>
                                <td>28.7%</td>
                            </tr>
                            <tr>
                                <td>/pages/jobs/detail.html</td>
                                <td>2,456</td>
                                <td>1,987</td>
                                <td>3m 34s</td>
                                <td>35.6%</td>
                            </tr>
                            <tr>
                                <td>/pages/auth/login.html</td>
                                <td>1,789</td>
                                <td>1,456</td>
                                <td>1m 23s</td>
                                <td>67.3%</td>
                            </tr>
                            <tr>
                                <td>/pages/employer/dashboard.html</td>
                                <td>1,234</td>
                                <td>892</td>
                                <td>6m 45s</td>
                                <td>15.2%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Export Actions -->
        <div class="export-actions">
            <h3>Export Complete Report</h3>
            <div class="export-buttons">
                <button class="btn" onclick="exportFullReport('pdf')">
                    <i class="fas fa-file-pdf"></i> Export as PDF
                </button>
                <button class="btn" onclick="exportFullReport('excel')">
                    <i class="fas fa-file-excel"></i> Export as Excel
                </button>
                <button class="btn" onclick="exportFullReport('csv')">
                    <i class="fas fa-file-csv"></i> Export as CSV
                </button>
                <button class="btn btn-success" onclick="scheduleReport()">
                    <i class="fas fa-calendar"></i> Schedule Report
                </button>
            </div>
        </div>
    </div>

    <script>
        let trafficChart, engagementChart, jobChart;

        function initializePage() {
            // Track page view
            trackEvent('Analytics Reports Page Viewed', {
                page_type: 'analytics_reports'
            });

            // Initialize charts
            initializeCharts();
        }

        function initializeCharts() {
            // Traffic Trends Chart
            const trafficCtx = document.getElementById('trafficChart').getContext('2d');
            trafficChart = new Chart(trafficCtx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [
                        {
                            label: 'Page Views',
                            data: [3200, 3800, 4100, 4500],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Unique Visitors',
                            data: [1200, 1450, 1680, 1890],
                            borderColor: '#28a745',
                            backgroundColor: 'rgba(40, 167, 69, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // User Engagement Chart
            const engagementCtx = document.getElementById('engagementChart').getContext('2d');
            engagementChart = new Chart(engagementCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Job Seekers', 'Employers', 'Visitors'],
                    datasets: [{
                        data: [67, 23, 10],
                        backgroundColor: ['#667eea', '#28a745', '#ffc107']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Job Performance Chart
            const jobCtx = document.getElementById('jobChart').getContext('2d');
            jobChart = new Chart(jobCtx, {
                type: 'bar',
                data: {
                    labels: ['Technology', 'Healthcare', 'Education', 'Manufacturing', 'Government'],
                    datasets: [
                        {
                            label: 'Job Postings',
                            data: [287, 198, 156, 134, 89],
                            backgroundColor: '#667eea'
                        },
                        {
                            label: 'Applications',
                            data: [1456, 987, 678, 445, 567],
                            backgroundColor: '#28a745'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function generateReport() {
            const dateRange = document.getElementById('dateRange').value;
            const reportType = document.getElementById('reportType').value;
            const userType = document.getElementById('userType').value;

            trackEvent('Analytics Report Generated', {
                date_range: dateRange,
                report_type: reportType,
                user_type: userType
            });

            alert(`Generating ${reportType} report for ${dateRange} (${userType})`);
            // In real app, this would fetch and display new data
        }

        function updateTrafficChart() {
            const period = document.getElementById('trafficPeriod').value;
            trackEvent('Analytics Chart Updated', { chart: 'traffic', period });
            alert(`Traffic chart updated for ${period} view`);
        }

        function exportReport(reportType) {
            trackEvent('Analytics Report Exported', { report_type: reportType });
            alert(`Exporting ${reportType} report...`);
        }

        function exportFullReport(format) {
            trackEvent('Full Analytics Report Exported', { format });
            alert(`Exporting complete report as ${format.toUpperCase()}...`);
        }

        function scheduleReport() {
            trackEvent('Analytics Report Scheduled');
            alert('Report scheduling interface would open here');
        }

        // Initialize page when DOM loads
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
